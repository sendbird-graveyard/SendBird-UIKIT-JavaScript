{"version":3,"file":"index-557f05f4.js","sources":["../src/smart-components/MessageSearch/dux/actionTypes.ts","../src/smart-components/MessageSearch/dux/reducers.ts","../src/smart-components/MessageSearch/dux/initialState.ts","../src/smart-components/MessageSearch/hooks/useSetChannel.ts","../src/smart-components/MessageSearch/hooks/useGetSearchedMessages.ts","../src/smart-components/MessageSearch/hooks/useScrollCallback.ts","../src/ui/MessageSearchItem/getCreatedAt.ts","../src/ui/MessageSearchItem/index.tsx","../src/ui/MessageSearchFileItem/utils.ts","../src/ui/MessageSearchFileItem/index.tsx","../src/smart-components/MessageSearch/index.tsx","../src/smart-components/MessageSearch/messageSearchPannel.tsx","../src/smart-components/App/index.jsx"],"sourcesContent":["export const GET_SEARCHED_MESSAGES = 'GET_SEARCHED_MESSAGES';\nexport const GET_NEXT_SEARCHED_MESSAGES = 'GET_NEXT_SEARCHED_MESSAGES';\nexport const START_MESSAGE_SEARCH = 'START_MESSAGE_SEARCH';\nexport const START_GETTING_SEARCHED_MESSAGES = 'START_GETTING_SEARCHED_MESSAGES';\nexport const SET_QUERY_INVALID = 'SET_QUERY_INVALID';\n\nexport const SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';\nexport const CHANNEL_INVALID = 'CHANNEL_INVALID';\n","import { State as initialStateInterface } from './initialState';\nimport * as actionTypes from './actionTypes';\n\ninterface ActionInterface {\n  type: string;\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  payload?: any;\n}\n\nexport default function reducer(\n  state: initialStateInterface,\n  action: ActionInterface,\n): initialStateInterface {\n  switch (action.type) {\n    case actionTypes.SET_CURRENT_CHANNEL: {\n      const currentChannel = action.payload;\n      return {\n        ...state,\n        currentChannel,\n        initialized: true,\n      };\n    }\n    case actionTypes.CHANNEL_INVALID: {\n      return {\n        ...state,\n        currentChannel: null,\n        initialized: false,\n      };\n    }\n    case actionTypes.GET_SEARCHED_MESSAGES: {\n      const { messages, createdQuery } = action.payload;\n      if (\n        createdQuery\n        && createdQuery.channelUrl === state.currentMessageSearchQuery.channelUrl\n        && createdQuery.key === state.currentMessageSearchQuery.key\n      ) {\n        return {\n          ...state,\n          loading: false,\n          isInvalid: false,\n          allMessages: [...messages],\n          hasMoreResult: state.currentMessageSearchQuery.hasNext,\n        };\n      }\n      return { ...state };\n    }\n    case actionTypes.SET_QUERY_INVALID: {\n      return {\n        ...state,\n        isInvalid: true,\n      }\n    }\n    case actionTypes.START_MESSAGE_SEARCH: {\n      return {\n        ...state,\n        isInvalid: false,\n        loading: false,\n      }\n    }\n    case actionTypes.START_GETTING_SEARCHED_MESSAGES: {\n      const currentMessageSearchQuery = action.payload;\n      return {\n        ...state,\n        loading: true,\n        currentMessageSearchQuery,\n      };\n    }\n    case actionTypes.GET_NEXT_SEARCHED_MESSAGES: {\n      const messages = action.payload;\n      return {\n        ...state,\n        allMessages: [...state.allMessages, ...messages],\n        hasMoreResult: state.currentMessageSearchQuery.hasNext,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n}\n","import SendbirdUIKit from '../../../index';\nexport interface State {\n  allMessages: Array<SendbirdUIKit.ClientFileMessage | SendbirdUIKit.ClientUserMessage>;\n  loading: boolean;\n  isInvalid: boolean;\n  initialized: boolean;\n  currentChannel: SendbirdUIKit.GroupChannelType;\n  currentMessageSearchQuery: SendbirdUIKit.ClientMessageSearchQuery;\n  hasMoreResult: boolean;\n}\n\nconst initialState: State = {\n  allMessages: [],\n  loading: false,\n  isInvalid: false,\n  initialized: false,\n  currentChannel: null,\n  currentMessageSearchQuery: null,\n  hasMoreResult: false,\n};\n\nexport default initialState;\n","import { useEffect, useState } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\n\ninterface MainProps {\n  channelUrl: string;\n  sdkInit: boolean;\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messageSearchDispathcer: ({ type: string, payload: any }) => void;\n}\n\nfunction useSetChannel(\n  { channelUrl, sdkInit }: MainProps,\n  { sdk, logger, messageSearchDispathcer }: ToolProps,\n): void {\n  const [groupInvalid, setGroupInvalid] = useState(null);\n  const [openInvalid, setOpenInvalid] = useState(null);\n  useEffect(() => {\n    if (channelUrl && sdkInit && sdk && (sdk.OpenChannel || sdk.GroupChannel)) {\n      sdk.GroupChannel.getChannel(channelUrl, (groupChannel, error) => {\n        if (!error) {\n          logger.info('MessageSearch | useSetChannel group channel', groupChannel);\n          messageSearchDispathcer({\n            type: messageActionTypes.SET_CURRENT_CHANNEL,\n            payload: groupChannel,\n          });\n        } else {\n          setGroupInvalid(true);\n        }\n      });\n      sdk.OpenChannel.getChannel(channelUrl, (openChannel, error) => {\n        if (!error) {\n          logger.info('MessageSearch | useSetChannel open channel', openChannel);\n          messageSearchDispathcer({\n            type: messageActionTypes.SET_CURRENT_CHANNEL,\n            payload: openChannel,\n          });\n          openChannel.enter((_, error) => {\n            logger.warning('MessageSearch | useSetChannel failed enter open channel', error);\n            messageSearchDispathcer({\n              type: messageActionTypes.CHANNEL_INVALID,\n              payload: null,\n            });\n          });\n        } else {\n          setOpenInvalid(true);\n        }\n      });\n    }\n  }, [channelUrl, sdkInit]);\n\n  useEffect(() => {\n    if (groupInvalid && openInvalid) {\n      console.log('sheet')\n      logger.info('MessageSearch | useSetChannel failed get channel', {\n        errorGroupChannel: groupInvalid,\n        errorOpenChannel: openInvalid,\n      });\n      messageSearchDispathcer({\n        type: messageActionTypes.CHANNEL_INVALID,\n        payload: null,\n      });\n    }\n  }, [groupInvalid, openInvalid]);\n}\n\nexport default useSetChannel;\n","import { useEffect } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport SendbirdUIKit from '../../../index';\nimport SendBird from 'sendbird';\n\ninterface MainProps {\n  currentChannel: SendbirdUIKit.GroupChannelType;\n  channelUrl: string;\n  searchString?: string;\n  messageSearchQuery?: SendbirdUIKit.MessageSearchQueryType;\n  onResultLoaded?: (\n    messages?: Array<SendBird.UserMessage | SendBird.FileMessage | SendBird.AdminMessage>,\n    error?: SendbirdUIKit.SendbirdError,\n  ) => void;\n  retryCount: number;\n}\ninterface ToolProps {\n  sdk: SendbirdUIKit.Sdk;\n  logger: SendbirdUIKit.Logger;\n  messageSearchDispathcer: ({ type: string, payload: any }) => void;\n}\n\nfunction useGetSearchedMessages(\n  { currentChannel, channelUrl, searchString, messageSearchQuery, onResultLoaded, retryCount }: MainProps,\n  { sdk, logger, messageSearchDispathcer }: ToolProps,\n): void {\n  useEffect(() => {\n    messageSearchDispathcer({\n      type: messageActionTypes.START_MESSAGE_SEARCH,\n      payload: null,\n    });\n    if (sdk && channelUrl && sdk.createMessageSearchQuery) {\n      if (searchString) {\n        const inputSearchMessageQueryObject = {\n          ...messageSearchQuery,\n          channelUrl,\n          messageTimestampFrom: currentChannel.invitedAt,\n        };\n        const createdQuery = sdk.createMessageSearchQuery(searchString, inputSearchMessageQueryObject);\n        createdQuery.next((messages, error) => {\n          if (!error) {\n            logger.info('MessageSearch | useGetSearchedMessages: succeeded getting messages', messages);\n            messageSearchDispathcer({\n              type: messageActionTypes.GET_SEARCHED_MESSAGES,\n              payload: {\n                messages,\n                createdQuery,\n              },\n            });\n            if (onResultLoaded && typeof onResultLoaded === 'function') {\n              onResultLoaded(messages, null);\n            }\n          } else {\n            logger.warning('MessageSearch | useGetSearchedMessages: getting failed', error);\n            messageSearchDispathcer({\n              type: messageActionTypes.SET_QUERY_INVALID,\n              payload: null,\n            });\n            if (onResultLoaded && typeof onResultLoaded === 'function') {\n              onResultLoaded(null, error);\n            }\n          }\n        });\n        messageSearchDispathcer({\n          type: messageActionTypes.START_GETTING_SEARCHED_MESSAGES,\n          payload: createdQuery,\n        });\n      } else {\n        logger.info('MessageSearch | useGetSeasrchedMessages: search string is empty');\n      }\n    }\n  }, [channelUrl, messageSearchQuery, searchString, currentChannel, retryCount]);\n}\n\nexport default useGetSearchedMessages;\n","import { useCallback } from 'react';\nimport * as messageActionTypes from '../dux/actionTypes';\nimport SendbirdUIKit from '../../../index';\n\ninterface MainProps {\n  currentMessageSearchQuery: SendBird.MessageSearchQuery;\n  hasMoreResult: boolean;\n  onResultLoaded?: (\n    messages?: Array<SendBird.UserMessage | SendBird.FileMessage | SendBird.AdminMessage>,\n    error?: SendbirdUIKit.SendbirdError,\n  ) => void;\n}\ninterface ToolProps {\n  logger: SendbirdUIKit.Logger;\n  messageSearchDispathcer: ({ type: string, payload: any }) => void;\n}\ntype CallbackReturn = (\n  callback: (\n    messages: Array<SendBird.UserMessage | SendBird.FileMessage | SendBird.AdminMessage>,\n    /* eslint-disable @typescript-eslint/no-explicit-any*/\n    error: any,\n  ) => void\n) => void;\n\nfunction useScrollCallback(\n  { currentMessageSearchQuery, hasMoreResult, onResultLoaded }: MainProps,\n  { logger, messageSearchDispathcer }: ToolProps,\n): CallbackReturn {\n  return useCallback((cb) => {\n    if (!hasMoreResult) {\n      logger.warning('MessageSearch | useScrollCallback: no more searched results', hasMoreResult);\n    }\n    if (currentMessageSearchQuery && currentMessageSearchQuery.hasNext) {\n      currentMessageSearchQuery.next((messages, error) => {\n        if (!error) {\n          logger.info('MessageSearch | useScrollCallback: succeeded getting searched messages', messages);\n          messageSearchDispathcer({\n            type: messageActionTypes.GET_NEXT_SEARCHED_MESSAGES,\n            payload: messages,\n          });\n          cb(messages, null);\n          if (onResultLoaded && typeof onResultLoaded === 'function') {\n            onResultLoaded(messages, null);\n          }\n        } else {\n          logger.warning('MessageSearch | useScrollCallback: failed getting searched messages', error);\n          cb(null, error);\n          if (onResultLoaded && typeof onResultLoaded === 'function') {\n            onResultLoaded(null, error);\n          }\n        }\n      });\n    } else {\n      logger.warning('MessageSearch | useScrollCallback: no currentMessageSearchQuery');\n    }\n  }, [currentMessageSearchQuery, hasMoreResult]);\n}\n\nexport default useScrollCallback;\n","import format from 'date-fns/format';\nimport isToday from 'date-fns/isToday';\nimport isYesterday from 'date-fns/isYesterday';\n\n// getCreatedAt\nexport default (createdAt: number): string => {\n  if (!createdAt) {\n    return '';\n  }\n  if (isToday(createdAt)) {\n    return format(createdAt, 'p');\n  }\n  if (isYesterday(createdAt)) {\n    return 'Yesterday';\n  }\n  return format(createdAt, 'MMM dd');\n};\n","import React, { useContext } from 'react';\nimport './index.scss';\nimport getCreatedAt from './getCreatedAt';\n\nimport Avatar from '../Avatar';\nimport Label, {\n  LabelTypography,\n  LabelColors,\n} from '../Label';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: SendbirdUIKit.ClientUserMessage;\n  onClick?: (message: SendbirdUIKit.ClientMessage) => void;\n  selected?: boolean;\n}\n\nexport default function MessageSearchItem({\n  className,\n  message,\n  onClick,\n  selected,\n}: Props): JSX.Element {\n  const { createdAt } = message;\n  const messageText = message.message;\n  const sender = message.sender || message._sender;\n  const { profileUrl, nickname } = sender;\n\n  const { stringSet } = useContext(LocalizationContext);\n  const injectingClassNames = Array.isArray(className) ? className : [className];\n  injectingClassNames.push('sendbird-message-search-item');\n  if (selected) {\n    injectingClassNames.push('sendbird-message-search-item--selected');\n  }\n\n  return (\n    <div\n      className={injectingClassNames.join(' ')}\n      onClick={(e) => {\n        e.stopPropagation();\n        onClick(message);\n      }}\n    >\n      <div className=\"sendbird-message-search-item__left\">\n        <Avatar\n          className=\"sendbird-message-search-item__left__sender-avatar\"\n          src={profileUrl}\n          alt=\"profile image\"\n          width=\"56px\"\n          height=\"56px\"\n        />\n      </div>\n      <div className=\"sendbird-message-search-item__right\">\n        <Label\n          className=\"sendbird-message-search-item__right__sender-name\"\n          type={LabelTypography.SUBTITLE_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {nickname || stringSet.NO_NAME}\n        </Label>\n        <Label\n          className=\"sendbird-message-search-item__right__message-text\"\n          type={LabelTypography.BODY_2}\n          color={LabelColors.ONBACKGROUND_3}\n        >\n          {messageText}\n        </Label>\n        <Label\n          className=\"sendbird-message-search-item__right__message-created-at\"\n          type={LabelTypography.CAPTION_3}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {getCreatedAt(createdAt)}\n        </Label>\n      </div>\n      <div className=\"sendbird-message-search-item__right-footer\" />\n    </div>\n  );\n}\n","import format from 'date-fns/format';\nimport isToday from 'date-fns/isToday';\nimport isYesterday from 'date-fns/isYesterday';\nimport { IconTypes } from '../Icon';\n\nexport function getCreatedAt(createdAt: number): string {\n  if (!createdAt) {\n    return '';\n  }\n  if (isToday(createdAt)) {\n    return format(createdAt, 'p');\n  }\n  if (isYesterday(createdAt)) {\n    return 'Yesterday';\n  }\n  return format(createdAt, 'MMM dd');\n}\n\nexport function getIconOfFileType(message: SendbirdUIKit.ClientFileMessage): string {\n  const { plainUrl, url } = message;\n  const fileMessageUrl = plainUrl || url;\n  const fileExtension = (fileMessageUrl.match(/\\.([^.]*?)(?=\\?|#|$)/))[1];\n\n  if (/(jpg|jpeg|png)$/i.test(fileExtension)) {\n    return IconTypes.PHOTO;\n  } else if (/mp4$/i.test(fileExtension)) {\n    return IconTypes.PLAY;\n  } else if (/mp3/i.test(fileExtension)) {\n    return IconTypes.FILE_AUDIO;\n  } else if (/gif/i.test(fileExtension)) {\n    return IconTypes.GIF;\n  } else {\n    return IconTypes.FILE_DOCUMENT;\n  }\n}\n\nexport function truncate(fullText: string, textLimit: number): string {\n  if (fullText.length <= textLimit) return fullText;\n  const separator = '...';\n  const sepLen = separator.length;\n  const charsToShow = textLimit - sepLen;\n  const frontChars = Math.ceil(charsToShow / 2);\n  const backChars = Math.floor(charsToShow / 2);\n  return fullText.substr(0, frontChars) + separator + fullText.substr(fullText.length - backChars);\n}\n","import React, { ReactElement, useContext } from 'react';\nimport './index.scss';\n\nimport Avatar from '../Avatar';\nimport Icon, { IconColors } from '../Icon';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { getCreatedAt, getIconOfFileType, truncate } from './utils';\n\ninterface Props {\n  className?: string | Array<string>;\n  message: SendbirdUIKit.ClientFileMessage;\n  onClick?: (message: SendbirdUIKit.ClientFileMessage) => void;\n  selected?: boolean;\n}\n\nexport default function MessageSearchFileItem(props: Props): ReactElement {\n  const {\n    className,\n    message,\n    onClick,\n    selected,\n  } = props;\n  const { createdAt, plainUrl, url, name } = message;\n  const fileMessageUrl = plainUrl || url;\n  const sender = message.sender || message._sender;\n  const { profileUrl, nickname } = sender;\n\n  const { stringSet } = useContext(LocalizationContext);\n  const injectingClassNames = Array.isArray(className) ? className : [className];\n  injectingClassNames.push('sendbird-message-search-file-item');\n  if (selected) {\n    injectingClassNames.push('sendbird-message-search-file-item--selected');\n  }\n\n  return (\n    <div\n      className={injectingClassNames.join(' ')}\n      onClick={(e) => {\n        e.stopPropagation();\n        onClick(message);\n      }}\n    >\n      <div className=\"sendbird-message-search-file-item__left\">\n        <Avatar\n          className=\"sendbird-message-search-file-item__left__sender-avatar\"\n          src={profileUrl}\n          alt=\"profile image\"\n          width=\"56px\"\n          height=\"56px\"\n        />\n      </div>\n      <div className=\"sendbird-message-search-file-item__right\">\n        <Label\n          className=\"sendbird-message-search-file-item__right__sender-name\"\n          type={LabelTypography.SUBTITLE_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {nickname || stringSet.NO_NAME}\n        </Label>\n        <div className=\"sendbird-message-search-file-item__right__content\">\n          <div className=\"sendbird-message-search-file-item__right__content__type-icon\">\n            <Icon\n              type={getIconOfFileType(message)}\n              fillColor={IconColors.PRIMARY}\n              width=\"18px\"\n              height=\"18px\"\n            />\n          </div>\n          <Label\n            className=\"sendbird-message-search-file-item__right__content__url\"\n            type={LabelTypography.BODY_2}\n            color={LabelColors.ONBACKGROUND_1}\n          >\n            {truncate(name || fileMessageUrl, 28)}\n          </Label>\n        </div>\n      </div>\n      <Label\n        className=\"sendbird-message-search-file-item__message-created-at\"\n        type={LabelTypography.CAPTION_3}\n        color={LabelColors.ONBACKGROUND_2}\n      >\n        {getCreatedAt(createdAt)}\n      </Label>\n      <div className=\"sendbird-message-search-file-item__right-footer\" />\n    </div>\n  );\n}\n","import React, { useReducer, useRef, useContext, useState } from 'react';\nimport './index.scss';\n\nimport widthSendbirdContext from '../../lib/SendbirdSdkContext';\nimport messageSearchReducer from './dux/reducers';\nimport messageSearchInitialState from './dux/initialState';\n\nimport useSetChannel from './hooks/useSetChannel';\nimport useGetSearchMessages from './hooks/useGetSearchedMessages';\nimport useScrollCallback from './hooks/useScrollCallback';\n\nimport MessageSearchItem from '../../ui/MessageSearchItem';\nimport PlaceHolder, { PlaceHolderTypes } from '../../ui/PlaceHolder';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport MessageSearchFileItem from '../../ui/MessageSearchFileItem';\n\nimport SendbirdUIKit from '../../index';\n\nconst COMPONENT_CLASS_NAME = 'sendbird-message-search';\n\ninterface Props extends SendbirdUIKit.MessageSearchProps {\n  // sendbird internal props\n  stores: {\n    sdkStore?: SendbirdUIKit.SdkStore,\n    userStore?: SendbirdUIKit.UserStore,\n  };\n  config: {\n    userId: string,\n    isOnline: boolean,\n    logger?: SendbirdUIKit.Logger,\n    theme?: string,\n    /* eslint-disable @typescript-eslint/no-explicit-any*/\n    pubSub: any,\n    disableUserProfile?: boolean,\n    renderUserProfile?(): JSX.Element,\n    imageCompression?: {\n      compressionRate?: number,\n      resizingWidth?: number | string,\n      resizingHeight?: number | string,\n    },\n  };\n}\n\nfunction MessageSearch(props: Props): JSX.Element {\n  const {\n    // sendbird internal props\n    stores,\n    config,\n    // message search props\n    channelUrl,\n    searchString,\n    messageSearchQuery,\n    renderSearchItem,\n    onResultLoaded,\n    onResultClick,\n  } = props;\n\n  // hook variables\n  const { stringSet } = useContext(LocalizationContext);\n  const [retryCount, setRetryCount] = useState(0); // this is a trigger flag for activating useGetSearchMessages\n  const [selectedMessageId, setSelectedMessageId] = useState(0);\n  const [messageSearchStore, messageSearchDispathcer] = useReducer(messageSearchReducer, messageSearchInitialState);\n  const {\n    allMessages,\n    loading,\n    isInvalid,\n    currentChannel,\n    currentMessageSearchQuery,\n    hasMoreResult,\n  } = messageSearchStore;\n\n  const getChannelName = () => {\n    if (currentChannel && currentChannel.name && currentChannel.name !== 'Group Channel') {\n      return currentChannel.name;\n    }\n    if (currentChannel && (currentChannel.name === 'Group Channel' || !currentChannel.name)) {\n      return currentChannel.members.map((member) => member.nickname || stringSet.NO_NAME).join(', ');\n    }\n    return stringSet.NO_TITLE;\n  };\n\n  // const\n  const {\n    sdkStore,\n  } = stores;\n  const {\n    logger,\n  } = config;\n  const { sdk } = sdkStore;\n  const sdkInit = sdkStore.initialized;\n  const scrollRef = useRef(null);\n  const handleOnScroll = (e) => {\n    const scrollElement = e.target;\n    const {\n      scrollTop,\n      scrollHeight,\n      clientHeight,\n    } = scrollElement;\n\n    if (!hasMoreResult) {\n      return;\n    }\n    if (scrollTop + clientHeight >= scrollHeight) {\n      onScroll(() => {\n        // after load more searched messages\n      });\n    }\n  };\n\n  useSetChannel(\n    { channelUrl, sdkInit },\n    { sdk, logger, messageSearchDispathcer },\n  );\n\n  useGetSearchMessages(\n    { currentChannel, channelUrl, searchString, messageSearchQuery, onResultLoaded, retryCount },\n    { sdk, logger, messageSearchDispathcer },\n  );\n\n  const onScroll = useScrollCallback(\n    { currentMessageSearchQuery, hasMoreResult, onResultLoaded },\n    { logger, messageSearchDispathcer },\n  );\n\n  const handleRetryToConnect = () => {\n    setRetryCount(retryCount + 1);\n  };\n\n  if (isInvalid && searchString) {\n    return (\n      <div className={COMPONENT_CLASS_NAME}>\n        <PlaceHolder\n          type={PlaceHolderTypes.WRONG}\n          retryToConnect={handleRetryToConnect}\n        />\n      </div>\n    );\n  }\n\n  if (loading && searchString) {\n    return (\n      <div className={COMPONENT_CLASS_NAME}>\n        <PlaceHolder type={PlaceHolderTypes.SEARCHING} />\n      </div>\n    );\n  }\n\n  if (!searchString) {\n    return (\n      <div className={COMPONENT_CLASS_NAME}>\n        <PlaceHolder\n          type={PlaceHolderTypes.SEARCH_IN}\n          searchInString={getChannelName()}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={COMPONENT_CLASS_NAME}\n      onScroll={handleOnScroll}\n      ref={scrollRef}\n    >\n      {\n        (allMessages.length > 0)\n          ? (\n            allMessages.map((message) => {\n              if (renderSearchItem) {\n                return renderSearchItem({ message, onResultClick });\n              }\n              if (message.messageType === 'file') {\n                return (\n                  <MessageSearchFileItem\n                    className={`${COMPONENT_CLASS_NAME}__message-search-item`}\n                    message={message}\n                    key={message.messageId}\n                    selected={(selectedMessageId === message.messageId)}\n                    onClick={() => {\n                      onResultClick(message);\n                      setSelectedMessageId(message.messageId);\n                    }}\n                  />\n                );\n              }\n              return (\n                <MessageSearchItem\n                  className={`${COMPONENT_CLASS_NAME}__message-search-item`}\n                  message={message}\n                  key={message.messageId}\n                  selected={(selectedMessageId === message.messageId)}\n                  onClick={() => {\n                    onResultClick(message);\n                    setSelectedMessageId(message.messageId);\n                  }}\n                />\n              );\n            })\n          )\n          : (\n            <PlaceHolder type={PlaceHolderTypes.NO_RESULTS} />\n          )\n      }\n    </div>\n  );\n}\n\nexport default widthSendbirdContext(MessageSearch);\n","import React, { useState, useContext, useEffect } from 'react';\nimport './messageSearchPannel.scss';\n\nimport MessageSearch from './index';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport Icon, { IconTypes, IconColors } from '../../ui/Icon';\nimport IconButton from '../../ui/IconButton';\nimport Label, { LabelTypography, LabelColors } from '../../ui/Label';\nimport Loader from '../../ui/Loader';\n\ninterface Props {\n  channelUrl: string;\n  onResultClick?: (message) => void;\n  onCloseClick?: () => void;\n}\n\nconst COMPONENT_CLASS_NAME = 'sendbird-message-search-pannel';\n\nfunction MessageSearchPannel(props: Props): JSX.Element {\n  const {\n    channelUrl,\n    onResultClick,\n    onCloseClick,\n  } = props;\n\n  const [searchString, setSearchString] = useState('');\n  const [inputString, setInputString] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  let timeout = null;\n  useEffect(() => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      setSearchString(inputString);\n      setLoading(true);\n      timeout = null;\n    }, 500);\n  }, [inputString]);\n\n  const handleOnChangeInputString = (e) => {\n    setInputString(e.target.value);\n  };\n\n  const handleOnResultLoaded = () => {\n    setLoading(false);\n  };\n\n  const handleOnClickResetStringButton = (e) => {\n    e.stopPropagation();\n    setInputString('');\n    setSearchString('');\n  };\n\n  return (\n    <div className={COMPONENT_CLASS_NAME}>\n      <div className={`${COMPONENT_CLASS_NAME}__header`}>\n        <Label\n          className={`${COMPONENT_CLASS_NAME}__header__title`}\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {stringSet.SEARCH_IN_CHANNEL}\n        </Label>\n        <IconButton\n          className={`${COMPONENT_CLASS_NAME}__header__close-button`}\n          width=\"32px\"\n          height=\"32px\"\n          onClick={onCloseClick}\n        >\n          <Icon\n            type={IconTypes.CLOSE}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            width=\"22px\"\n            height=\"22px\"\n          />\n        </IconButton>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__input`}>\n        <div className={`${COMPONENT_CLASS_NAME}__input__container`}>\n            <Icon\n              className={`${COMPONENT_CLASS_NAME}__input__container__search-icon`}\n              type={IconTypes.SEARCH}\n              fillColor={IconColors.ON_BACKGROUND_3}\n              width=\"24px\"\n              height=\"24px\"\n            />\n            <input\n              className={`${COMPONENT_CLASS_NAME}__input__container__input-area`}\n              placeholder={stringSet.SEARCH}\n              value={inputString}\n              onChange={handleOnChangeInputString}\n            />\n            {\n              inputString && loading && (\n                <Loader\n                  className={`${COMPONENT_CLASS_NAME}__input__container__spinner`}\n                  width=\"20px\"\n                  height=\"20px\"\n                >\n                  <Icon\n                    type={IconTypes.SPINNER}\n                    fillColor={IconColors.PRIMARY}\n                    width=\"20px\"\n                    height=\"20px\"\n                  />\n                </Loader>\n              )\n            }\n            {\n              !loading && inputString && (\n                <Icon\n                  className={`${COMPONENT_CLASS_NAME}__input__container__reset-input-button`}\n                  type={IconTypes.REMOVE}\n                  fillColor={IconColors.ON_BACKGROUND_3}\n                  width=\"20px\"\n                  height=\"20px\"\n                  onClick={handleOnClickResetStringButton}\n                />\n              )\n            }\n        </div>\n      </div>\n      <div className={`${COMPONENT_CLASS_NAME}__message-search`}>\n        <MessageSearch\n          channelUrl={channelUrl}\n          searchString={searchString}\n          onResultClick={onResultClick}\n          onResultLoaded={handleOnResultLoaded}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default MessageSearchPannel;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport Sendbird from '../../lib/Sendbird';\n\nimport ChannelList from '../ChannelList';\nimport Conversation from '../Conversation';\nimport ChannelSettings from '../ChannelSettings';\nimport MessageSearchPannel from '../MessageSearch/messageSearchPannel';\n\nimport './index.scss';\n\nexport default function App(props) {\n  const {\n    appId,\n    userId,\n    accessToken,\n    theme,\n    userListQuery,\n    nickname,\n    profileUrl,\n    config = {},\n    useReaction,\n    useMessageGrouping,\n    colorSet,\n    stringSet,\n    allowProfileEdit,\n    disableUserProfile,\n    renderUserProfile,\n    showSearchIcon,\n    onProfileEditSuccess,\n    imageCompression,\n  } = props;\n  const [currentChannelUrl, setCurrentChannelUrl] = useState(null);\n  const [showSettings, setShowSettings] = useState(false);\n  const [showSearch, setShowSearch] = useState(false);\n  const [highlightedMessage, setHighlightedMessage] = useState(null);\n  const [startingPoint, setStartingPoint] = useState(null);\n\n  return (\n    <Sendbird\n      stringSet={stringSet}\n      appId={appId}\n      userId={userId}\n      accessToken={accessToken}\n      theme={theme}\n      nickname={nickname}\n      profileUrl={profileUrl}\n      userListQuery={userListQuery}\n      config={config}\n      colorSet={colorSet}\n      disableUserProfile={disableUserProfile}\n      renderUserProfile={renderUserProfile}\n      imageCompression={imageCompression}\n    >\n      <div className=\"sendbird-app__wrap\">\n        <div className=\"sendbird-app__channellist-wrap\">\n          <ChannelList\n            allowProfileEdit={allowProfileEdit}\n            onProfileEditSuccess={onProfileEditSuccess}\n            onChannelSelect={(channel) => {\n              setStartingPoint(null);\n              setHighlightedMessage(null);\n              if (channel && channel.url) {\n                setCurrentChannelUrl(channel.url);\n              } else {\n                setCurrentChannelUrl('');\n              }\n            }}\n          />\n        </div>\n        <div\n          className={`\n            ${showSettings ? 'sendbird-app__conversation--settings-open' : ''}\n            ${showSearch ? 'sendbird-app__conversation--search-open' : ''}\n            sendbird-app__conversation-wrap\n          `}\n        >\n          <Conversation\n            channelUrl={currentChannelUrl}\n            onChatHeaderActionClick={() => {\n              setShowSearch(false);\n              setShowSettings(!showSettings);\n            }}\n            onSearchClick={() => {\n              setShowSettings(false);\n              setShowSearch(!showSearch);\n            }}\n            showSearchIcon={showSearchIcon}\n            startingPoint={startingPoint}\n            highlightedMessage={highlightedMessage}\n            useReaction={useReaction}\n            useMessageGrouping={useMessageGrouping}\n          />\n        </div>\n        {showSettings && (\n          <div className=\"sendbird-app__settingspanel-wrap\">\n            <ChannelSettings\n              className=\"sendbird-channel-settings\"\n              channelUrl={currentChannelUrl}\n              onCloseClick={() => {\n                setShowSettings(false);\n              }}\n            />\n          </div>\n        )}\n        {showSearch && (\n          <div className=\"sendbird-app__searchpanel-wrap\">\n            <MessageSearchPannel\n              channelUrl={currentChannelUrl}\n              onResultClick={(message) => {\n                if (message.messageId === highlightedMessage) {\n                  setHighlightedMessage(null);\n                  setTimeout(() => {\n                    setHighlightedMessage(message.messageId);\n                  });\n                } else {\n                  setStartingPoint(message.createdAt);\n                  setHighlightedMessage(message.messageId);\n                }\n              }}\n              onCloseClick={() => {\n                setShowSearch(false);\n              }}\n            />\n          </div>\n        )}\n      </div>\n    </Sendbird>\n  );\n}\n\nApp.propTypes = {\n  appId: PropTypes.string.isRequired,\n  userId: PropTypes.string.isRequired,\n  accessToken: PropTypes.string,\n  theme: PropTypes.string,\n  userListQuery: PropTypes.func,\n  nickname: PropTypes.string,\n  profileUrl: PropTypes.string,\n  allowProfileEdit: PropTypes.bool,\n  disableUserProfile: PropTypes.bool,\n  renderUserProfile: PropTypes.func,\n  onProfileEditSuccess: PropTypes.func,\n  config: PropTypes.shape({\n    // None Error Warning Info 'All/Debug'\n    logLevel: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.arrayOf(PropTypes.string),\n    ]),\n  }),\n  useReaction: PropTypes.bool,\n  showSearchIcon: PropTypes.bool,\n  useMessageGrouping: PropTypes.bool,\n  stringSet: PropTypes.objectOf(PropTypes.string),\n  colorSet: PropTypes.objectOf(PropTypes.string),\n  imageCompression: PropTypes.shape({\n    compressionRate: PropTypes.number,\n    resizingWidth: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    resizingHeight: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n  }),\n};\n\nApp.defaultProps = {\n  accessToken: '',\n  theme: 'light',\n  nickname: '',\n  profileUrl: '',\n  userListQuery: null,\n  allowProfileEdit: false,\n  onProfileEditSuccess: null,\n  disableUserProfile: false,\n  showSearchIcon: false,\n  renderUserProfile: null,\n  config: {},\n  useReaction: true,\n  useMessageGrouping: true,\n  stringSet: null,\n  colorSet: null,\n  imageCompression: {},\n};\n"],"names":["GET_SEARCHED_MESSAGES","GET_NEXT_SEARCHED_MESSAGES","START_MESSAGE_SEARCH","START_GETTING_SEARCHED_MESSAGES","SET_QUERY_INVALID","SET_CURRENT_CHANNEL","CHANNEL_INVALID","reducer","state","action","type","actionTypes","currentChannel","payload","initialized","_a","messages","createdQuery","channelUrl","currentMessageSearchQuery","key","loading","isInvalid","allMessages","hasMoreResult","hasNext","initialState","useSetChannel","_b","sdkInit","sdk","logger","messageSearchDispathcer","_c","useState","groupInvalid","setGroupInvalid","_d","openInvalid","setOpenInvalid","useEffect","OpenChannel","GroupChannel","getChannel","groupChannel","error","info","messageActionTypes","openChannel","enter","_","warning","console","log","errorGroupChannel","errorOpenChannel","useGetSearchedMessages","searchString","messageSearchQuery","onResultLoaded","retryCount","createMessageSearchQuery","inputSearchMessageQueryObject","messageTimestampFrom","invitedAt","createdQuery_1","next","useScrollCallback","useCallback","cb","createdAt","isToday","format","isYesterday","MessageSearchItem","className","message","onClick","selected","messageText","sender","_sender","profileUrl","nickname","stringSet","useContext","LocalizationContext","injectingClassNames","Array","isArray","push","join","e","stopPropagation","LabelTypography","SUBTITLE_2","LabelColors","ONBACKGROUND_1","NO_NAME","BODY_2","ONBACKGROUND_3","CAPTION_3","ONBACKGROUND_2","getCreatedAt","getIconOfFileType","plainUrl","url","fileMessageUrl","fileExtension","match","test","IconTypes","PHOTO","PLAY","FILE_AUDIO","GIF","FILE_DOCUMENT","truncate","fullText","textLimit","length","separator","sepLen","charsToShow","frontChars","Math","ceil","backChars","floor","substr","MessageSearchFileItem","props","name","IconColors","PRIMARY","COMPONENT_CLASS_NAME","MessageSearch","stores","config","renderSearchItem","onResultClick","setRetryCount","selectedMessageId","setSelectedMessageId","useReducer","messageSearchReducer","messageSearchInitialState","messageSearchStore","getChannelName","members","map","member","NO_TITLE","sdkStore","scrollRef","useRef","handleOnScroll","scrollElement","target","scrollTop","scrollHeight","clientHeight","onScroll","useGetSearchMessages","handleRetryToConnect","PlaceHolderTypes","WRONG","SEARCHING","SEARCH_IN","messageType","messageId","NO_RESULTS","widthSendbirdContext","MessageSearchPannel","onCloseClick","setSearchString","inputString","setInputString","setLoading","timeout","clearTimeout","setTimeout","handleOnChangeInputString","value","handleOnResultLoaded","handleOnClickResetStringButton","H_2","SEARCH_IN_CHANNEL","CLOSE","ON_BACKGROUND_1","SEARCH","ON_BACKGROUND_3","SPINNER","REMOVE","App","appId","userId","accessToken","theme","userListQuery","useReaction","useMessageGrouping","colorSet","allowProfileEdit","disableUserProfile","renderUserProfile","showSearchIcon","onProfileEditSuccess","imageCompression","currentChannelUrl","setCurrentChannelUrl","showSettings","setShowSettings","showSearch","setShowSearch","highlightedMessage","setHighlightedMessage","startingPoint","setStartingPoint","channel","propTypes","PropTypes","string","isRequired","func","bool","shape","logLevel","oneOfType","arrayOf","objectOf","compressionRate","number","resizingWidth","resizingHeight","defaultProps"],"mappings":";;;;;;;;;;;;AAAO,IAAMA,qBAAqB,GAAG,uBAA9B;AACA,IAAMC,0BAA0B,GAAG,4BAAnC;AACA,IAAMC,oBAAoB,GAAG,sBAA7B;AACA,IAAMC,+BAA+B,GAAG,iCAAxC;AACA,IAAMC,iBAAiB,GAAG,mBAA1B;AAEA,IAAMC,mBAAmB,GAAG,qBAA5B;AACA,IAAMC,eAAe,GAAG,iBAAxB;;SCEiBC,QACtBC,OACAC;AAEA,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKC,mBAAL;AAAsC;AACpC,YAAMC,cAAc,GAAGH,MAAM,CAACI,OAA9B;AACA,qCACKL;AACHI,UAAAA,cAAc;AACdE,UAAAA,WAAW,EAAE;UAHf;AAKD;;AACD,SAAKH,eAAL;AAAkC;AAChC,qCACKH;AACHI,UAAAA,cAAc,EAAE;AAChBE,UAAAA,WAAW,EAAE;UAHf;AAKD;;AACD,SAAKH,qBAAL;AAAwC;AAChC,YAAAI,KAA6BN,MAAM,CAACI,OAApC;AAAA,YAAEG,QAAQ,cAAV;AAAA,YAAYC,YAAY,kBAAxB;;AACN,YACEA,YAAY,IACTA,YAAY,CAACC,UAAb,KAA4BV,KAAK,CAACW,yBAAN,CAAgCD,UAD/D,IAEGD,YAAY,CAACG,GAAb,KAAqBZ,KAAK,CAACW,yBAAN,CAAgCC,GAH1D,EAIE;AACA,uCACKZ;AACHa,YAAAA,OAAO,EAAE;AACTC,YAAAA,SAAS,EAAE;AACXC,YAAAA,WAAW,iBAAMP;AACjBQ,YAAAA,aAAa,EAAEhB,KAAK,CAACW,yBAAN,CAAgCM;YALjD;AAOD;;AACD,4BAAYjB,MAAZ;AACD;;AACD,SAAKG,iBAAL;AAAoC;AAClC,qCACKH;AACHc,UAAAA,SAAS,EAAE;UAFb;AAID;;AACD,SAAKX,oBAAL;AAAuC;AACrC,qCACKH;AACHc,UAAAA,SAAS,EAAE;AACXD,UAAAA,OAAO,EAAE;UAHX;AAKD;;AACD,SAAKV,+BAAL;AAAkD;AAChD,YAAMQ,yBAAyB,GAAGV,MAAM,CAACI,OAAzC;AACA,qCACKL;AACHa,UAAAA,OAAO,EAAE;AACTF,UAAAA,yBAAyB;UAH3B;AAKD;;AACD,SAAKR,0BAAL;AAA6C;AAC3C,YAAMK,QAAQ,GAAGP,MAAM,CAACI,OAAxB;AACA,qCACKL;AACHe,UAAAA,WAAW,iBAAMf,KAAK,CAACe,aAAgBP;AACvCQ,UAAAA,aAAa,EAAEhB,KAAK,CAACW,yBAAN,CAAgCM;UAHjD;AAKD;;AACD;AAAS;AACP,eAAOjB,KAAP;AACD;AAhEH;AAkED;;ACpED,IAAMkB,YAAY,GAAU;AAC1BH,EAAAA,WAAW,EAAE,EADa;AAE1BF,EAAAA,OAAO,EAAE,KAFiB;AAG1BC,EAAAA,SAAS,EAAE,KAHe;AAI1BR,EAAAA,WAAW,EAAE,KAJa;AAK1BF,EAAAA,cAAc,EAAE,IALU;AAM1BO,EAAAA,yBAAyB,EAAE,IAND;AAO1BK,EAAAA,aAAa,EAAE;AAPW,CAA5B;;ACEA,SAASG,aAAT,CACEZ,EADF,EAEEa,EAFF;MACIV,UAAU;MAAEW,OAAO;MACnBC,GAAG;MAAEC,MAAM;MAAEC,uBAAuB;;AAEhC,MAAAC,KAAkCC,QAAQ,CAAC,IAAD,CAA1C;AAAA,MAACC,YAAY,QAAb;AAAA,MAAeC,eAAe,QAA9B;;AACA,MAAAC,KAAgCH,QAAQ,CAAC,IAAD,CAAxC;AAAA,MAACI,WAAW,QAAZ;AAAA,MAAcC,cAAc,QAA5B;;AACNC,EAAAA,SAAS,CAAC;AACR,QAAItB,UAAU,IAAIW,OAAd,IAAyBC,GAAzB,KAAiCA,GAAG,CAACW,WAAJ,IAAmBX,GAAG,CAACY,YAAxD,CAAJ,EAA2E;AACzEZ,MAAAA,GAAG,CAACY,YAAJ,CAAiBC,UAAjB,CAA4BzB,UAA5B,EAAwC,UAAC0B,YAAD,EAAeC,KAAf;AACtC,YAAI,CAACA,KAAL,EAAY;AACVd,UAAAA,MAAM,CAACe,IAAP,CAAY,6CAAZ,EAA2DF,YAA3D;AACAZ,UAAAA,uBAAuB,CAAC;AACtBtB,YAAAA,IAAI,EAAEqC,mBADgB;AAEtBlC,YAAAA,OAAO,EAAE+B;AAFa,WAAD,CAAvB;AAID,SAND,MAMO;AACLR,UAAAA,eAAe,CAAC,IAAD,CAAf;AACD;AACF,OAVD;AAWAN,MAAAA,GAAG,CAACW,WAAJ,CAAgBE,UAAhB,CAA2BzB,UAA3B,EAAuC,UAAC8B,WAAD,EAAcH,KAAd;AACrC,YAAI,CAACA,KAAL,EAAY;AACVd,UAAAA,MAAM,CAACe,IAAP,CAAY,4CAAZ,EAA0DE,WAA1D;AACAhB,UAAAA,uBAAuB,CAAC;AACtBtB,YAAAA,IAAI,EAAEqC,mBADgB;AAEtBlC,YAAAA,OAAO,EAAEmC;AAFa,WAAD,CAAvB;AAIAA,UAAAA,WAAW,CAACC,KAAZ,CAAkB,UAACC,CAAD,EAAIL,KAAJ;AAChBd,YAAAA,MAAM,CAACoB,OAAP,CAAe,yDAAf,EAA0EN,KAA1E;AACAb,YAAAA,uBAAuB,CAAC;AACtBtB,cAAAA,IAAI,EAAEqC,eADgB;AAEtBlC,cAAAA,OAAO,EAAE;AAFa,aAAD,CAAvB;AAID,WAND;AAOD,SAbD,MAaO;AACL0B,UAAAA,cAAc,CAAC,IAAD,CAAd;AACD;AACF,OAjBD;AAkBD;AACF,GAhCQ,EAgCN,CAACrB,UAAD,EAAaW,OAAb,CAhCM,CAAT;AAkCAW,EAAAA,SAAS,CAAC;AACR,QAAIL,YAAY,IAAIG,WAApB,EAAiC;AAC/Bc,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAtB,MAAAA,MAAM,CAACe,IAAP,CAAY,kDAAZ,EAAgE;AAC9DQ,QAAAA,iBAAiB,EAAEnB,YAD2C;AAE9DoB,QAAAA,gBAAgB,EAAEjB;AAF4C,OAAhE;AAIAN,MAAAA,uBAAuB,CAAC;AACtBtB,QAAAA,IAAI,EAAEqC,eADgB;AAEtBlC,QAAAA,OAAO,EAAE;AAFa,OAAD,CAAvB;AAID;AACF,GAZQ,EAYN,CAACsB,YAAD,EAAeG,WAAf,CAZM,CAAT;AAaD;;AC5CD,SAASkB,sBAAT,CACEzC,EADF,EAEEa,EAFF;MACIhB,cAAc;MAAEM,UAAU;MAAEuC,YAAY;MAAEC,kBAAkB;MAAEC,cAAc;MAAEC,UAAU;MACxF9B,GAAG;MAAEC,MAAM;MAAEC,uBAAuB;AAEtCQ,EAAAA,SAAS,CAAC;AACRR,IAAAA,uBAAuB,CAAC;AACtBtB,MAAAA,IAAI,EAAEqC,oBADgB;AAEtBlC,MAAAA,OAAO,EAAE;AAFa,KAAD,CAAvB;;AAIA,QAAIiB,GAAG,IAAIZ,UAAP,IAAqBY,GAAG,CAAC+B,wBAA7B,EAAuD;AACrD,UAAIJ,YAAJ,EAAkB;AAChB,YAAMK,6BAA6B,yBAC9BJ;AACHxC,UAAAA,UAAU;AACV6C,UAAAA,oBAAoB,EAAEnD,cAAc,CAACoD;UAHvC;;AAKA,YAAMC,cAAY,GAAGnC,GAAG,CAAC+B,wBAAJ,CAA6BJ,YAA7B,EAA2CK,6BAA3C,CAArB;AACAG,QAAAA,cAAY,CAACC,IAAb,CAAkB,UAAClD,QAAD,EAAW6B,KAAX;AAChB,cAAI,CAACA,KAAL,EAAY;AACVd,YAAAA,MAAM,CAACe,IAAP,CAAY,oEAAZ,EAAkF9B,QAAlF;AACAgB,YAAAA,uBAAuB,CAAC;AACtBtB,cAAAA,IAAI,EAAEqC,qBADgB;AAEtBlC,cAAAA,OAAO,EAAE;AACPG,gBAAAA,QAAQ,UADD;AAEPC,gBAAAA,YAAY;AAFL;AAFa,aAAD,CAAvB;;AAOA,gBAAI0C,cAAc,IAAI,OAAOA,cAAP,KAA0B,UAAhD,EAA4D;AAC1DA,cAAAA,cAAc,CAAC3C,QAAD,EAAW,IAAX,CAAd;AACD;AACF,WAZD,MAYO;AACLe,YAAAA,MAAM,CAACoB,OAAP,CAAe,wDAAf,EAAyEN,KAAzE;AACAb,YAAAA,uBAAuB,CAAC;AACtBtB,cAAAA,IAAI,EAAEqC,iBADgB;AAEtBlC,cAAAA,OAAO,EAAE;AAFa,aAAD,CAAvB;;AAIA,gBAAI8C,cAAc,IAAI,OAAOA,cAAP,KAA0B,UAAhD,EAA4D;AAC1DA,cAAAA,cAAc,CAAC,IAAD,EAAOd,KAAP,CAAd;AACD;AACF;AACF,SAvBD;AAwBAb,QAAAA,uBAAuB,CAAC;AACtBtB,UAAAA,IAAI,EAAEqC,+BADgB;AAEtBlC,UAAAA,OAAO,EAAEoD;AAFa,SAAD,CAAvB;AAID,OAnCD,MAmCO;AACLlC,QAAAA,MAAM,CAACe,IAAP,CAAY,iEAAZ;AACD;AACF;AACF,GA7CQ,EA6CN,CAAC5B,UAAD,EAAawC,kBAAb,EAAiCD,YAAjC,EAA+C7C,cAA/C,EAA+DgD,UAA/D,CA7CM,CAAT;AA8CD;;AChDD,SAASO,iBAAT,CACEpD,EADF,EAEEa,EAFF;MACIT,yBAAyB;MAAEK,aAAa;MAAEmC,cAAc;MACxD5B,MAAM;MAAEC,uBAAuB;AAEjC,SAAOoC,WAAW,CAAC,UAACC,EAAD;AACjB,QAAI,CAAC7C,aAAL,EAAoB;AAClBO,MAAAA,MAAM,CAACoB,OAAP,CAAe,6DAAf,EAA8E3B,aAA9E;AACD;;AACD,QAAIL,yBAAyB,IAAIA,yBAAyB,CAACM,OAA3D,EAAoE;AAClEN,MAAAA,yBAAyB,CAAC+C,IAA1B,CAA+B,UAAClD,QAAD,EAAW6B,KAAX;AAC7B,YAAI,CAACA,KAAL,EAAY;AACVd,UAAAA,MAAM,CAACe,IAAP,CAAY,wEAAZ,EAAsF9B,QAAtF;AACAgB,UAAAA,uBAAuB,CAAC;AACtBtB,YAAAA,IAAI,EAAEqC,0BADgB;AAEtBlC,YAAAA,OAAO,EAAEG;AAFa,WAAD,CAAvB;AAIAqD,UAAAA,EAAE,CAACrD,QAAD,EAAW,IAAX,CAAF;;AACA,cAAI2C,cAAc,IAAI,OAAOA,cAAP,KAA0B,UAAhD,EAA4D;AAC1DA,YAAAA,cAAc,CAAC3C,QAAD,EAAW,IAAX,CAAd;AACD;AACF,SAVD,MAUO;AACLe,UAAAA,MAAM,CAACoB,OAAP,CAAe,qEAAf,EAAsFN,KAAtF;AACAwB,UAAAA,EAAE,CAAC,IAAD,EAAOxB,KAAP,CAAF;;AACA,cAAIc,cAAc,IAAI,OAAOA,cAAP,KAA0B,UAAhD,EAA4D;AAC1DA,YAAAA,cAAc,CAAC,IAAD,EAAOd,KAAP,CAAd;AACD;AACF;AACF,OAlBD;AAmBD,KApBD,MAoBO;AACLd,MAAAA,MAAM,CAACoB,OAAP,CAAe,iEAAf;AACD;AACF,GA3BiB,EA2Bf,CAAChC,yBAAD,EAA4BK,aAA5B,CA3Be,CAAlB;AA4BD;;ACnDD,oBAAe,UAAC8C,SAAD;AACb,MAAI,CAACA,SAAL,EAAgB;AACd,WAAO,EAAP;AACD;;AACD,MAAIC,OAAO,CAACD,SAAD,CAAX,EAAwB;AACtB,WAAOE,MAAM,CAACF,SAAD,EAAY,GAAZ,CAAb;AACD;;AACD,MAAIG,WAAW,CAACH,SAAD,CAAf,EAA4B;AAC1B,WAAO,WAAP;AACD;;AACD,SAAOE,MAAM,CAACF,SAAD,EAAY,QAAZ,CAAb;AACD,CAXD;;SCawBI,kBAAkB3D;MACxC4D,SAAS;MACTC,OAAO;MACPC,QAAO;MACPC,QAAQ;AAEA,MAAAR,SAAS,GAAKM,OAAO,UAArB;AACR,MAAMG,WAAW,GAAGH,OAAO,CAACA,OAA5B;AACA,MAAMI,MAAM,GAAGJ,OAAO,CAACI,MAAR,IAAkBJ,OAAO,CAACK,OAAzC;AACQ,MAAAC,UAAU,GAAeF,MAAM,WAA/B;AAAA,MAAYG,QAAQ,GAAKH,MAAM,SAA/B;AAEA,MAAAI,SAAS,GAAKC,UAAU,CAACC,mBAAD,CAAV,UAAd;AACR,MAAMC,mBAAmB,GAAGC,KAAK,CAACC,OAAN,CAAcd,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CAAnE;AACAY,EAAAA,mBAAmB,CAACG,IAApB,CAAyB,8BAAzB;;AACA,MAAIZ,QAAJ,EAAc;AACZS,IAAAA,mBAAmB,CAACG,IAApB,CAAyB,wCAAzB;AACD;;AAED,SACE;AACE,IAAA,SAAS,EAAEH,mBAAmB,CAACI,IAApB,CAAyB,GAAzB,CADb;AAEE,IAAA,OAAO,EAAE,iBAACC,CAAD;AACPA,MAAAA,CAAC,CAACC,eAAF;;AACAhB,MAAAA,QAAO,CAACD,OAAD,CAAP;AACD;AALH,KAOE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,oBAAC,MAAD;AACE,IAAA,SAAS,EAAC,mDADZ;AAEE,IAAA,GAAG,EAAEM,UAFP;AAGE,IAAA,GAAG,EAAC,eAHN;AAIE,IAAA,KAAK,EAAC,MAJR;AAKE,IAAA,MAAM,EAAC;AALT,IADF,CAPF,EAgBE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,oBAAC,KAAD;AACE,IAAA,SAAS,EAAC,kDADZ;AAEE,IAAA,IAAI,EAAEY,eAAe,CAACC,UAFxB;AAGE,IAAA,KAAK,EAAEC,WAAW,CAACC;AAHrB,KAKGd,QAAQ,IAAIC,SAAS,CAACc,OALzB,CADF,EAQE,oBAAC,KAAD;AACE,IAAA,SAAS,EAAC,mDADZ;AAEE,IAAA,IAAI,EAAEJ,eAAe,CAACK,MAFxB;AAGE,IAAA,KAAK,EAAEH,WAAW,CAACI;AAHrB,KAKGrB,WALH,CARF,EAeE,oBAAC,KAAD;AACE,IAAA,SAAS,EAAC,yDADZ;AAEE,IAAA,IAAI,EAAEe,eAAe,CAACO,SAFxB;AAGE,IAAA,KAAK,EAAEL,WAAW,CAACM;AAHrB,KAKGC,YAAY,CAACjC,SAAD,CALf,CAfF,CAhBF,EAuCE;AAAK,IAAA,SAAS,EAAC;AAAf,IAvCF,CADF;AA2CD;;SC1EeiC,eAAajC;AAC3B,MAAI,CAACA,SAAL,EAAgB;AACd,WAAO,EAAP;AACD;;AACD,MAAIC,OAAO,CAACD,SAAD,CAAX,EAAwB;AACtB,WAAOE,MAAM,CAACF,SAAD,EAAY,GAAZ,CAAb;AACD;;AACD,MAAIG,WAAW,CAACH,SAAD,CAAf,EAA4B;AAC1B,WAAO,WAAP;AACD;;AACD,SAAOE,MAAM,CAACF,SAAD,EAAY,QAAZ,CAAb;AACD;AAED,SAAgBkC,kBAAkB5B;AACxB,MAAA6B,QAAQ,GAAU7B,OAAO,SAAzB;AAAA,MAAU8B,GAAG,GAAK9B,OAAO,IAAzB;AACR,MAAM+B,cAAc,GAAGF,QAAQ,IAAIC,GAAnC;AACA,MAAME,aAAa,GAAID,cAAc,CAACE,KAAf,CAAqB,sBAArB,CAAD,CAA+C,CAA/C,CAAtB;;AAEA,MAAI,mBAAmBC,IAAnB,CAAwBF,aAAxB,CAAJ,EAA4C;AAC1C,WAAOG,SAAS,CAACC,KAAjB;AACD,GAFD,MAEO,IAAI,QAAQF,IAAR,CAAaF,aAAb,CAAJ,EAAiC;AACtC,WAAOG,SAAS,CAACE,IAAjB;AACD,GAFM,MAEA,IAAI,OAAOH,IAAP,CAAYF,aAAZ,CAAJ,EAAgC;AACrC,WAAOG,SAAS,CAACG,UAAjB;AACD,GAFM,MAEA,IAAI,OAAOJ,IAAP,CAAYF,aAAZ,CAAJ,EAAgC;AACrC,WAAOG,SAAS,CAACI,GAAjB;AACD,GAFM,MAEA;AACL,WAAOJ,SAAS,CAACK,aAAjB;AACD;AACF;AAED,SAAgBC,SAASC,UAAkBC;AACzC,MAAID,QAAQ,CAACE,MAAT,IAAmBD,SAAvB,EAAkC,OAAOD,QAAP;AAClC,MAAMG,SAAS,GAAG,KAAlB;AACA,MAAMC,MAAM,GAAGD,SAAS,CAACD,MAAzB;AACA,MAAMG,WAAW,GAAGJ,SAAS,GAAGG,MAAhC;AACA,MAAME,UAAU,GAAGC,IAAI,CAACC,IAAL,CAAUH,WAAW,GAAG,CAAxB,CAAnB;AACA,MAAMI,SAAS,GAAGF,IAAI,CAACG,KAAL,CAAWL,WAAW,GAAG,CAAzB,CAAlB;AACA,SAAOL,QAAQ,CAACW,MAAT,CAAgB,CAAhB,EAAmBL,UAAnB,IAAiCH,SAAjC,GAA6CH,QAAQ,CAACW,MAAT,CAAgBX,QAAQ,CAACE,MAAT,GAAkBO,SAAlC,CAApD;AACD;;SC5BuBG,sBAAsBC;AAE1C,MAAAxD,SAAS,GAIPwD,KAAK,UAJP;AAAA,MACAvD,OAAO,GAGLuD,KAAK,QAJP;AAAA,MAEAtD,QAAO,GAELsD,KAAK,QAJP;AAAA,MAGArD,QAAQ,GACNqD,KAAK,SAJP;AAKM,MAAA7D,SAAS,GAA0BM,OAAO,UAA1C;AAAA,MAAW6B,QAAQ,GAAgB7B,OAAO,SAA1C;AAAA,MAAqB8B,GAAG,GAAW9B,OAAO,IAA1C;AAAA,MAA0BwD,IAAI,GAAKxD,OAAO,KAA1C;AACR,MAAM+B,cAAc,GAAGF,QAAQ,IAAIC,GAAnC;AACA,MAAM1B,MAAM,GAAGJ,OAAO,CAACI,MAAR,IAAkBJ,OAAO,CAACK,OAAzC;AACQ,MAAAC,UAAU,GAAeF,MAAM,WAA/B;AAAA,MAAYG,QAAQ,GAAKH,MAAM,SAA/B;AAEA,MAAAI,SAAS,GAAKC,UAAU,CAACC,mBAAD,CAAV,UAAd;AACR,MAAMC,mBAAmB,GAAGC,KAAK,CAACC,OAAN,CAAcd,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CAAnE;AACAY,EAAAA,mBAAmB,CAACG,IAApB,CAAyB,mCAAzB;;AACA,MAAIZ,QAAJ,EAAc;AACZS,IAAAA,mBAAmB,CAACG,IAApB,CAAyB,6CAAzB;AACD;;AAED,SACE;AACE,IAAA,SAAS,EAAEH,mBAAmB,CAACI,IAApB,CAAyB,GAAzB,CADb;AAEE,IAAA,OAAO,EAAE,iBAACC,CAAD;AACPA,MAAAA,CAAC,CAACC,eAAF;;AACAhB,MAAAA,QAAO,CAACD,OAAD,CAAP;AACD;AALH,KAOE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,oBAAC,MAAD;AACE,IAAA,SAAS,EAAC,wDADZ;AAEE,IAAA,GAAG,EAAEM,UAFP;AAGE,IAAA,GAAG,EAAC,eAHN;AAIE,IAAA,KAAK,EAAC,MAJR;AAKE,IAAA,MAAM,EAAC;AALT,IADF,CAPF,EAgBE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,oBAAC,KAAD;AACE,IAAA,SAAS,EAAC,uDADZ;AAEE,IAAA,IAAI,EAAEY,eAAe,CAACC,UAFxB;AAGE,IAAA,KAAK,EAAEC,WAAW,CAACC;AAHrB,KAKGd,QAAQ,IAAIC,SAAS,CAACc,OALzB,CADF,EAQE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,oBAAC,IAAD;AACE,IAAA,IAAI,EAAEM,iBAAiB,CAAC5B,OAAD,CADzB;AAEE,IAAA,SAAS,EAAEyD,UAAU,CAACC,OAFxB;AAGE,IAAA,KAAK,EAAC,MAHR;AAIE,IAAA,MAAM,EAAC;AAJT,IADF,CADF,EASE,oBAAC,KAAD;AACE,IAAA,SAAS,EAAC,wDADZ;AAEE,IAAA,IAAI,EAAExC,eAAe,CAACK,MAFxB;AAGE,IAAA,KAAK,EAAEH,WAAW,CAACC;AAHrB,KAKGoB,QAAQ,CAACe,IAAI,IAAIzB,cAAT,EAAyB,EAAzB,CALX,CATF,CARF,CAhBF,EA0CE,oBAAC,KAAD;AACE,IAAA,SAAS,EAAC,uDADZ;AAEE,IAAA,IAAI,EAAEb,eAAe,CAACO,SAFxB;AAGE,IAAA,KAAK,EAAEL,WAAW,CAACM;AAHrB,KAKGC,cAAY,CAACjC,SAAD,CALf,CA1CF,EAiDE;AAAK,IAAA,SAAS,EAAC;AAAf,IAjDF,CADF;AAqDD;;ACtED,IAAMiE,oBAAoB,GAAG,yBAA7B;;AAyBA,SAASC,aAAT,CAAuBL,KAAvB;AAGI;AAAAM,EAAAA,MAAM,GASJN,KAAK,OATP;AAAA,MACAO,MAAM,GAQJP,KAAK,OATP;AAAA;AAGAjH,EAAAA,UAAU,GAMRiH,KAAK,WATP;AAAA,MAIA1E,YAAY,GAKV0E,KAAK,aATP;AAAA,MAKAzE,kBAAkB,GAIhByE,KAAK,mBATP;AAAA,MAMAQ,gBAAgB,GAGdR,KAAK,iBATP;AAAA,MAOAxE,cAAc,GAEZwE,KAAK,eATP;AAAA,MAQAS,aAAa,GACXT,KAAK,cATP;;AAYM,MAAA/C,SAAS,GAAKC,UAAU,CAACC,mBAAD,CAAV,UAAd;;AACF,MAAAvE,KAA8BmB,QAAQ,CAAC,CAAD,CAAtC;AAAA,MAAC0B,UAAU,QAAX;AAAA,MAAaiF,aAAa,QAA1B;;;AACA,MAAAjH,KAA4CM,QAAQ,CAAC,CAAD,CAApD;AAAA,MAAC4G,iBAAiB,QAAlB;AAAA,MAAoBC,oBAAoB,QAAxC;;AACA,MAAA9G,KAAgD+G,UAAU,CAACC,OAAD,EAAuBC,YAAvB,CAA1D;AAAA,MAACC,kBAAkB,QAAnB;AAAA,MAAqBnH,uBAAuB,QAA5C;;AAEJ,MAAAT,WAAW,GAMT4H,kBAAkB,YANpB;AAAA,MACA9H,OAAO,GAKL8H,kBAAkB,QANpB;AAAA,MAEA7H,SAAS,GAIP6H,kBAAkB,UANpB;AAAA,MAGAvI,cAAc,GAGZuI,kBAAkB,eANpB;AAAA,MAIAhI,yBAAyB,GAEvBgI,kBAAkB,0BANpB;AAAA,MAKA3H,aAAa,GACX2H,kBAAkB,cANpB;;AAQF,MAAMC,cAAc,GAAG,SAAjBA,cAAiB;AACrB,QAAIxI,cAAc,IAAIA,cAAc,CAACwH,IAAjC,IAAyCxH,cAAc,CAACwH,IAAf,KAAwB,eAArE,EAAsF;AACpF,aAAOxH,cAAc,CAACwH,IAAtB;AACD;;AACD,QAAIxH,cAAc,KAAKA,cAAc,CAACwH,IAAf,KAAwB,eAAxB,IAA2C,CAACxH,cAAc,CAACwH,IAAhE,CAAlB,EAAyF;AACvF,aAAOxH,cAAc,CAACyI,OAAf,CAAuBC,GAAvB,CAA2B,UAACC,MAAD;AAAY,eAAAA,MAAM,CAACpE,QAAP,IAAmBC,SAAS,CAACc,OAA7B;AAAoC,OAA3E,EAA6EP,IAA7E,CAAkF,IAAlF,CAAP;AACD;;AACD,WAAOP,SAAS,CAACoE,QAAjB;AACD,GARD;;;AAYE,MAAAC,QAAQ,GACNhB,MAAM,SADR;AAGA,MAAA1G,MAAM,GACJ2G,MAAM,OADR;AAEM,MAAA5G,GAAG,GAAK2H,QAAQ,IAAhB;AACR,MAAM5H,OAAO,GAAG4H,QAAQ,CAAC3I,WAAzB;AACA,MAAM4I,SAAS,GAAGC,MAAM,CAAC,IAAD,CAAxB;;AACA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAChE,CAAD;AACrB,QAAMiE,aAAa,GAAGjE,CAAC,CAACkE,MAAxB;AAEE,QAAAC,SAAS,GAGPF,aAAa,UAHf;AAAA,QACAG,YAAY,GAEVH,aAAa,aAHf;AAAA,QAEAI,YAAY,GACVJ,aAAa,aAHf;;AAKF,QAAI,CAACrI,aAAL,EAAoB;AAClB;AACD;;AACD,QAAIuI,SAAS,GAAGE,YAAZ,IAA4BD,YAAhC,EAA8C;AAC5CE,MAAAA,QAAQ,CAAC;AAER,OAFO,CAAR;AAGD;AACF,GAhBD;;AAkBAvI,EAAAA,aAAa,CACX;AAAET,IAAAA,UAAU,YAAZ;AAAcW,IAAAA,OAAO;AAArB,GADW,EAEX;AAAEC,IAAAA,GAAG,KAAL;AAAOC,IAAAA,MAAM,QAAb;AAAeC,IAAAA,uBAAuB;AAAtC,GAFW,CAAb;AAKAmI,EAAAA,sBAAoB,CAClB;AAAEvJ,IAAAA,cAAc,gBAAhB;AAAkBM,IAAAA,UAAU,YAA5B;AAA8BuC,IAAAA,YAAY,cAA1C;AAA4CC,IAAAA,kBAAkB,oBAA9D;AAAgEC,IAAAA,cAAc,gBAA9E;AAAgFC,IAAAA,UAAU;AAA1F,GADkB,EAElB;AAAE9B,IAAAA,GAAG,KAAL;AAAOC,IAAAA,MAAM,QAAb;AAAeC,IAAAA,uBAAuB;AAAtC,GAFkB,CAApB;AAKA,MAAMkI,QAAQ,GAAG/F,iBAAiB,CAChC;AAAEhD,IAAAA,yBAAyB,2BAA3B;AAA6BK,IAAAA,aAAa,eAA1C;AAA4CmC,IAAAA,cAAc;AAA1D,GADgC,EAEhC;AAAE5B,IAAAA,MAAM,QAAR;AAAUC,IAAAA,uBAAuB;AAAjC,GAFgC,CAAlC;;AAKA,MAAMoI,oBAAoB,GAAG,SAAvBA,oBAAuB;AAC3BvB,IAAAA,aAAa,CAACjF,UAAU,GAAG,CAAd,CAAb;AACD,GAFD;;AAIA,MAAItC,SAAS,IAAImC,YAAjB,EAA+B;AAC7B,WACE;AAAK,MAAA,SAAS,EAAE8E;AAAhB,OACE,oBAAC,WAAD;AACE,MAAA,IAAI,EAAE8B,gBAAgB,CAACC,KADzB;AAEE,MAAA,cAAc,EAAEF;AAFlB,MADF,CADF;AAQD;;AAED,MAAI/I,OAAO,IAAIoC,YAAf,EAA6B;AAC3B,WACE;AAAK,MAAA,SAAS,EAAE8E;AAAhB,OACE,oBAAC,WAAD;AAAa,MAAA,IAAI,EAAE8B,gBAAgB,CAACE;AAApC,MADF,CADF;AAKD;;AAED,MAAI,CAAC9G,YAAL,EAAmB;AACjB,WACE;AAAK,MAAA,SAAS,EAAE8E;AAAhB,OACE,oBAAC,WAAD;AACE,MAAA,IAAI,EAAE8B,gBAAgB,CAACG,SADzB;AAEE,MAAA,cAAc,EAAEpB,cAAc;AAFhC,MADF,CADF;AAQD;;AAED,SACE;AACE,IAAA,SAAS,EAAEb,oBADb;AAEE,IAAA,QAAQ,EAAEqB,cAFZ;AAGE,IAAA,GAAG,EAAEF;AAHP,KAMKnI,WAAW,CAACiG,MAAZ,GAAqB,CAAtB,GAEIjG,WAAW,CAAC+H,GAAZ,CAAgB,UAAC1E,OAAD;AACd,QAAI+D,gBAAJ,EAAsB;AACpB,aAAOA,gBAAgB,CAAC;AAAE/D,QAAAA,OAAO,SAAT;AAAWgE,QAAAA,aAAa;AAAxB,OAAD,CAAvB;AACD;;AACD,QAAIhE,OAAO,CAAC6F,WAAR,KAAwB,MAA5B,EAAoC;AAClC,aACE,oBAAC,qBAAD;AACE,QAAA,SAAS,EAAKlC,oBAAoB,0BADpC;AAEE,QAAA,OAAO,EAAE3D,OAFX;AAGE,QAAA,GAAG,EAAEA,OAAO,CAAC8F,SAHf;AAIE,QAAA,QAAQ,EAAG5B,iBAAiB,KAAKlE,OAAO,CAAC8F,SAJ3C;AAKE,QAAA,OAAO,EAAE;AACP9B,UAAAA,aAAa,CAAChE,OAAD,CAAb;AACAmE,UAAAA,oBAAoB,CAACnE,OAAO,CAAC8F,SAAT,CAApB;AACD;AARH,QADF;AAYD;;AACD,WACE,oBAAC,iBAAD;AACE,MAAA,SAAS,EAAKnC,oBAAoB,0BADpC;AAEE,MAAA,OAAO,EAAE3D,OAFX;AAGE,MAAA,GAAG,EAAEA,OAAO,CAAC8F,SAHf;AAIE,MAAA,QAAQ,EAAG5B,iBAAiB,KAAKlE,OAAO,CAAC8F,SAJ3C;AAKE,MAAA,OAAO,EAAE;AACP9B,QAAAA,aAAa,CAAChE,OAAD,CAAb;AACAmE,QAAAA,oBAAoB,CAACnE,OAAO,CAAC8F,SAAT,CAApB;AACD;AARH,MADF;AAYD,GA9BD,CAFJ,GAmCI,oBAAC,WAAD;AAAa,IAAA,IAAI,EAAEL,gBAAgB,CAACM;AAApC,IAzCR,CADF;AA+CD;;AAED,sBAAeC,mBAAoB,CAACpC,aAAD,CAAnC;;AC/LA,IAAMD,sBAAoB,GAAG,gCAA7B;;AAEA,SAASsC,mBAAT,CAA6B1C,KAA7B;AAEI,MAAAjH,UAAU,GAGRiH,KAAK,WAHP;AAAA,MACAS,aAAa,GAEXT,KAAK,cAHP;AAAA,MAEA2C,YAAY,GACV3C,KAAK,aAHP;;AAKI,MAAApH,KAAkCmB,QAAQ,CAAC,EAAD,CAA1C;AAAA,MAACuB,YAAY,QAAb;AAAA,MAAesH,eAAe,QAA9B;;AACA,MAAAnJ,KAAgCM,QAAQ,CAAC,EAAD,CAAxC;AAAA,MAAC8I,WAAW,QAAZ;AAAA,MAAcC,cAAc,QAA5B;;AACA,MAAAhJ,KAAwBC,QAAQ,CAAC,KAAD,CAAhC;AAAA,MAACb,OAAO,QAAR;AAAA,MAAU6J,UAAU,QAApB;;AACE,MAAA9F,SAAS,GAAKC,UAAU,CAACC,mBAAD,CAAV,UAAd;AAER,MAAI6F,OAAO,GAAG,IAAd;AACA3I,EAAAA,SAAS,CAAC;AACR,QAAI2I,OAAJ,EAAa;AACXC,MAAAA,YAAY,CAACD,OAAD,CAAZ;AACD;;AACDA,IAAAA,OAAO,GAAGE,UAAU,CAAC;AACnBN,MAAAA,eAAe,CAACC,WAAD,CAAf;AACAE,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAC,MAAAA,OAAO,GAAG,IAAV;AACD,KAJmB,EAIjB,GAJiB,CAApB;AAKD,GATQ,EASN,CAACH,WAAD,CATM,CAAT;;AAWA,MAAMM,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAC1F,CAAD;AAChCqF,IAAAA,cAAc,CAACrF,CAAC,CAACkE,MAAF,CAASyB,KAAV,CAAd;AACD,GAFD;;AAIA,MAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB;AAC3BN,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GAFD;;AAIA,MAAMO,8BAA8B,GAAG,SAAjCA,8BAAiC,CAAC7F,CAAD;AACrCA,IAAAA,CAAC,CAACC,eAAF;AACAoF,IAAAA,cAAc,CAAC,EAAD,CAAd;AACAF,IAAAA,eAAe,CAAC,EAAD,CAAf;AACD,GAJD;;AAMA,SACE;AAAK,IAAA,SAAS,EAAExC;AAAhB,KACE;AAAK,IAAA,SAAS,EAAKA,sBAAoB;AAAvC,KACE,oBAAC,KAAD;AACE,IAAA,SAAS,EAAKA,sBAAoB,oBADpC;AAEE,IAAA,IAAI,EAAEzC,eAAe,CAAC4F,GAFxB;AAGE,IAAA,KAAK,EAAE1F,WAAW,CAACC;AAHrB,KAKGb,SAAS,CAACuG,iBALb,CADF,EAQE,oBAAC,UAAD;AACE,IAAA,SAAS,EAAKpD,sBAAoB,2BADpC;AAEE,IAAA,KAAK,EAAC,MAFR;AAGE,IAAA,MAAM,EAAC,MAHT;AAIE,IAAA,OAAO,EAAEuC;AAJX,KAME,oBAAC,IAAD;AACE,IAAA,IAAI,EAAE/D,SAAS,CAAC6E,KADlB;AAEE,IAAA,SAAS,EAAEvD,UAAU,CAACwD,eAFxB;AAGE,IAAA,KAAK,EAAC,MAHR;AAIE,IAAA,MAAM,EAAC;AAJT,IANF,CARF,CADF,EAuBE;AAAK,IAAA,SAAS,EAAKtD,sBAAoB;AAAvC,KACE;AAAK,IAAA,SAAS,EAAKA,sBAAoB;AAAvC,KACI,oBAAC,IAAD;AACE,IAAA,SAAS,EAAKA,sBAAoB,oCADpC;AAEE,IAAA,IAAI,EAAExB,SAAS,CAAC+E,MAFlB;AAGE,IAAA,SAAS,EAAEzD,UAAU,CAAC0D,eAHxB;AAIE,IAAA,KAAK,EAAC,MAJR;AAKE,IAAA,MAAM,EAAC;AALT,IADJ,EAQI;AACE,IAAA,SAAS,EAAKxD,sBAAoB,mCADpC;AAEE,IAAA,WAAW,EAAEnD,SAAS,CAAC0G,MAFzB;AAGE,IAAA,KAAK,EAAEd,WAHT;AAIE,IAAA,QAAQ,EAAEM;AAJZ,IARJ,EAeMN,WAAW,IAAI3J,OAAf,IACE,oBAAC,MAAD;AACE,IAAA,SAAS,EAAKkH,sBAAoB,gCADpC;AAEE,IAAA,KAAK,EAAC,MAFR;AAGE,IAAA,MAAM,EAAC;AAHT,KAKE,oBAAC,IAAD;AACE,IAAA,IAAI,EAAExB,SAAS,CAACiF,OADlB;AAEE,IAAA,SAAS,EAAE3D,UAAU,CAACC,OAFxB;AAGE,IAAA,KAAK,EAAC,MAHR;AAIE,IAAA,MAAM,EAAC;AAJT,IALF,CAhBR,EA+BM,CAACjH,OAAD,IAAY2J,WAAZ,IACE,oBAAC,IAAD;AACE,IAAA,SAAS,EAAKzC,sBAAoB,2CADpC;AAEE,IAAA,IAAI,EAAExB,SAAS,CAACkF,MAFlB;AAGE,IAAA,SAAS,EAAE5D,UAAU,CAAC0D,eAHxB;AAIE,IAAA,KAAK,EAAC,MAJR;AAKE,IAAA,MAAM,EAAC,MALT;AAME,IAAA,OAAO,EAAEN;AANX,IAhCR,CADF,CAvBF,EAoEE;AAAK,IAAA,SAAS,EAAKlD,sBAAoB;AAAvC,KACE,oBAACC,eAAD;AACE,IAAA,UAAU,EAAEtH,UADd;AAEE,IAAA,YAAY,EAAEuC,YAFhB;AAGE,IAAA,aAAa,EAAEmF,aAHjB;AAIE,IAAA,cAAc,EAAE4C;AAJlB,IADF,CApEF,CADF;AA+ED;;AC3Hc,SAASU,GAAT,CAAa/D,KAAb,EAAoB;AAAA,MAE/BgE,KAF+B,GAoB7BhE,KApB6B,CAE/BgE,KAF+B;AAAA,MAG/BC,MAH+B,GAoB7BjE,KApB6B,CAG/BiE,MAH+B;AAAA,MAI/BC,WAJ+B,GAoB7BlE,KApB6B,CAI/BkE,WAJ+B;AAAA,MAK/BC,KAL+B,GAoB7BnE,KApB6B,CAK/BmE,KAL+B;AAAA,MAM/BC,aAN+B,GAoB7BpE,KApB6B,CAM/BoE,aAN+B;AAAA,MAO/BpH,QAP+B,GAoB7BgD,KApB6B,CAO/BhD,QAP+B;AAAA,MAQ/BD,UAR+B,GAoB7BiD,KApB6B,CAQ/BjD,UAR+B;AAAA,sBAoB7BiD,KApB6B,CAS/BO,MAT+B;AAAA,MAS/BA,MAT+B,8BAStB,EATsB;AAAA,MAU/B8D,WAV+B,GAoB7BrE,KApB6B,CAU/BqE,WAV+B;AAAA,MAW/BC,kBAX+B,GAoB7BtE,KApB6B,CAW/BsE,kBAX+B;AAAA,MAY/BC,QAZ+B,GAoB7BvE,KApB6B,CAY/BuE,QAZ+B;AAAA,MAa/BtH,SAb+B,GAoB7B+C,KApB6B,CAa/B/C,SAb+B;AAAA,MAc/BuH,gBAd+B,GAoB7BxE,KApB6B,CAc/BwE,gBAd+B;AAAA,MAe/BC,kBAf+B,GAoB7BzE,KApB6B,CAe/ByE,kBAf+B;AAAA,MAgB/BC,iBAhB+B,GAoB7B1E,KApB6B,CAgB/B0E,iBAhB+B;AAAA,MAiB/BC,cAjB+B,GAoB7B3E,KApB6B,CAiB/B2E,cAjB+B;AAAA,MAkB/BC,oBAlB+B,GAoB7B5E,KApB6B,CAkB/B4E,oBAlB+B;AAAA,MAmB/BC,gBAnB+B,GAoB7B7E,KApB6B,CAmB/B6E,gBAnB+B;;AAAA,kBAqBiB9K,QAAQ,CAAC,IAAD,CArBzB;AAAA;AAAA,MAqB1B+K,iBArB0B;AAAA,MAqBPC,oBArBO;;AAAA,mBAsBOhL,QAAQ,CAAC,KAAD,CAtBf;AAAA;AAAA,MAsB1BiL,YAtB0B;AAAA,MAsBZC,eAtBY;;AAAA,mBAuBGlL,QAAQ,CAAC,KAAD,CAvBX;AAAA;AAAA,MAuB1BmL,UAvB0B;AAAA,MAuBdC,aAvBc;;AAAA,mBAwBmBpL,QAAQ,CAAC,IAAD,CAxB3B;AAAA;AAAA,MAwB1BqL,kBAxB0B;AAAA,MAwBNC,qBAxBM;;AAAA,mBAyBStL,QAAQ,CAAC,IAAD,CAzBjB;AAAA;AAAA,MAyB1BuL,aAzB0B;AAAA,MAyBXC,gBAzBW;;AA2BjC,SACE,oBAAC,QAAD;AACE,IAAA,SAAS,EAAEtI,SADb;AAEE,IAAA,KAAK,EAAE+G,KAFT;AAGE,IAAA,MAAM,EAAEC,MAHV;AAIE,IAAA,WAAW,EAAEC,WAJf;AAKE,IAAA,KAAK,EAAEC,KALT;AAME,IAAA,QAAQ,EAAEnH,QANZ;AAOE,IAAA,UAAU,EAAED,UAPd;AAQE,IAAA,aAAa,EAAEqH,aARjB;AASE,IAAA,MAAM,EAAE7D,MATV;AAUE,IAAA,QAAQ,EAAEgE,QAVZ;AAWE,IAAA,kBAAkB,EAAEE,kBAXtB;AAYE,IAAA,iBAAiB,EAAEC,iBAZrB;AAaE,IAAA,gBAAgB,EAAEG;AAbpB,KAeE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,oBAAC,WAAD;AACE,IAAA,gBAAgB,EAAEL,gBADpB;AAEE,IAAA,oBAAoB,EAAEI,oBAFxB;AAGE,IAAA,eAAe,EAAE,yBAACY,OAAD,EAAa;AAC5BD,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAF,MAAAA,qBAAqB,CAAC,IAAD,CAArB;;AACA,UAAIG,OAAO,IAAIA,OAAO,CAACjH,GAAvB,EAA4B;AAC1BwG,QAAAA,oBAAoB,CAACS,OAAO,CAACjH,GAAT,CAApB;AACD,OAFD,MAEO;AACLwG,QAAAA,oBAAoB,CAAC,EAAD,CAApB;AACD;AACF;AAXH,IADF,CADF,EAgBE;AACE,IAAA,SAAS,0BACLC,YAAY,GAAG,2CAAH,GAAiD,EADxD,2BAELE,UAAU,GAAG,yCAAH,GAA+C,EAFpD;AADX,KAOE,oBAAC,YAAD;AACE,IAAA,UAAU,EAAEJ,iBADd;AAEE,IAAA,uBAAuB,EAAE,mCAAM;AAC7BK,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAF,MAAAA,eAAe,CAAC,CAACD,YAAF,CAAf;AACD,KALH;AAME,IAAA,aAAa,EAAE,yBAAM;AACnBC,MAAAA,eAAe,CAAC,KAAD,CAAf;AACAE,MAAAA,aAAa,CAAC,CAACD,UAAF,CAAb;AACD,KATH;AAUE,IAAA,cAAc,EAAEP,cAVlB;AAWE,IAAA,aAAa,EAAEW,aAXjB;AAYE,IAAA,kBAAkB,EAAEF,kBAZtB;AAaE,IAAA,WAAW,EAAEf,WAbf;AAcE,IAAA,kBAAkB,EAAEC;AAdtB,IAPF,CAhBF,EAwCGU,YAAY,IACX;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,oBAAC,eAAD;AACE,IAAA,SAAS,EAAC,2BADZ;AAEE,IAAA,UAAU,EAAEF,iBAFd;AAGE,IAAA,YAAY,EAAE,wBAAM;AAClBG,MAAAA,eAAe,CAAC,KAAD,CAAf;AACD;AALH,IADF,CAzCJ,EAmDGC,UAAU,IACT;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,oBAAC,mBAAD;AACE,IAAA,UAAU,EAAEJ,iBADd;AAEE,IAAA,aAAa,EAAE,uBAACrI,OAAD,EAAa;AAC1B,UAAIA,OAAO,CAAC8F,SAAR,KAAsB6C,kBAA1B,EAA8C;AAC5CC,QAAAA,qBAAqB,CAAC,IAAD,CAArB;AACAnC,QAAAA,UAAU,CAAC,YAAM;AACfmC,UAAAA,qBAAqB,CAAC5I,OAAO,CAAC8F,SAAT,CAArB;AACD,SAFS,CAAV;AAGD,OALD,MAKO;AACLgD,QAAAA,gBAAgB,CAAC9I,OAAO,CAACN,SAAT,CAAhB;AACAkJ,QAAAA,qBAAqB,CAAC5I,OAAO,CAAC8F,SAAT,CAArB;AACD;AACF,KAZH;AAaE,IAAA,YAAY,EAAE,wBAAM;AAClB4C,MAAAA,aAAa,CAAC,KAAD,CAAb;AACD;AAfH,IADF,CApDJ,CAfF,CADF;AA2FD;AAEDpB,GAAG,CAAC0B,SAAJ,GAAgB;AACdzB,EAAAA,KAAK,EAAE0B,SAAS,CAACC,MAAV,CAAiBC,UADV;AAEd3B,EAAAA,MAAM,EAAEyB,SAAS,CAACC,MAAV,CAAiBC,UAFX;AAGd1B,EAAAA,WAAW,EAAEwB,SAAS,CAACC,MAHT;AAIdxB,EAAAA,KAAK,EAAEuB,SAAS,CAACC,MAJH;AAKdvB,EAAAA,aAAa,EAAEsB,SAAS,CAACG,IALX;AAMd7I,EAAAA,QAAQ,EAAE0I,SAAS,CAACC,MANN;AAOd5I,EAAAA,UAAU,EAAE2I,SAAS,CAACC,MAPR;AAQdnB,EAAAA,gBAAgB,EAAEkB,SAAS,CAACI,IARd;AASdrB,EAAAA,kBAAkB,EAAEiB,SAAS,CAACI,IAThB;AAUdpB,EAAAA,iBAAiB,EAAEgB,SAAS,CAACG,IAVf;AAWdjB,EAAAA,oBAAoB,EAAEc,SAAS,CAACG,IAXlB;AAYdtF,EAAAA,MAAM,EAAEmF,SAAS,CAACK,KAAV,CAAgB;AACtB;AACAC,IAAAA,QAAQ,EAAEN,SAAS,CAACO,SAAV,CAAoB,CAC5BP,SAAS,CAACC,MADkB,EAE5BD,SAAS,CAACQ,OAAV,CAAkBR,SAAS,CAACC,MAA5B,CAF4B,CAApB;AAFY,GAAhB,CAZM;AAmBdtB,EAAAA,WAAW,EAAEqB,SAAS,CAACI,IAnBT;AAoBdnB,EAAAA,cAAc,EAAEe,SAAS,CAACI,IApBZ;AAqBdxB,EAAAA,kBAAkB,EAAEoB,SAAS,CAACI,IArBhB;AAsBd7I,EAAAA,SAAS,EAAEyI,SAAS,CAACS,QAAV,CAAmBT,SAAS,CAACC,MAA7B,CAtBG;AAuBdpB,EAAAA,QAAQ,EAAEmB,SAAS,CAACS,QAAV,CAAmBT,SAAS,CAACC,MAA7B,CAvBI;AAwBdd,EAAAA,gBAAgB,EAAEa,SAAS,CAACK,KAAV,CAAgB;AAChCK,IAAAA,eAAe,EAAEV,SAAS,CAACW,MADK;AAEhCC,IAAAA,aAAa,EAAEZ,SAAS,CAACO,SAAV,CAAoB,CACjCP,SAAS,CAACW,MADuB,EAEjCX,SAAS,CAACC,MAFuB,CAApB,CAFiB;AAMhCY,IAAAA,cAAc,EAAEb,SAAS,CAACO,SAAV,CAAoB,CAClCP,SAAS,CAACW,MADwB,EAElCX,SAAS,CAACC,MAFwB,CAApB;AANgB,GAAhB;AAxBJ,CAAhB;AAqCA5B,GAAG,CAACyC,YAAJ,GAAmB;AACjBtC,EAAAA,WAAW,EAAE,EADI;AAEjBC,EAAAA,KAAK,EAAE,OAFU;AAGjBnH,EAAAA,QAAQ,EAAE,EAHO;AAIjBD,EAAAA,UAAU,EAAE,EAJK;AAKjBqH,EAAAA,aAAa,EAAE,IALE;AAMjBI,EAAAA,gBAAgB,EAAE,KAND;AAOjBI,EAAAA,oBAAoB,EAAE,IAPL;AAQjBH,EAAAA,kBAAkB,EAAE,KARH;AASjBE,EAAAA,cAAc,EAAE,KATC;AAUjBD,EAAAA,iBAAiB,EAAE,IAVF;AAWjBnE,EAAAA,MAAM,EAAE,EAXS;AAYjB8D,EAAAA,WAAW,EAAE,IAZI;AAajBC,EAAAA,kBAAkB,EAAE,IAbH;AAcjBrH,EAAAA,SAAS,EAAE,IAdM;AAejBsH,EAAAA,QAAQ,EAAE,IAfO;AAgBjBM,EAAAA,gBAAgB,EAAE;AAhBD,CAAnB;;;;"}